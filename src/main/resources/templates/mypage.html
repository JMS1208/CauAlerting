<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>내 정보</title>
    <!-- 외부 URL은 Thymeleaf 문법 없이 href를 사용 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <!-- 내부 리소스에는 Thymeleaf 문법 사용 -->
    <link rel="stylesheet" href="/css/mypage.css"/>

</head>
<body data-student-id="[[${userId}]]" data-csrf-token="${_csrf.token}">
<div class="container">
    <section class="logo-section">
        <img src="/src/cau_logo.jpeg" class="logo-img">
        <div class="logo-title">중앙대학교 소프트웨어학부<br />공지사항 알리미</div>
    </section>
    <section class="email-section">
        이메일
        <a class="student-email" id="student-email"><span th:text="${username}"></span></a>
        <hr class="divider">
    </section>

    <section class="alert-section">
        알림
        <div class="alert-status-buttons">
            <a class="alert-status" id="alert-status"><span th:text="${enabled} ? '켜진 상태' : '꺼진 상태'"></span></a>
            <a class="alert-buttons">
                <form th:action="@{/api/enable-notification}" method="post">
                    <input type="hidden" name="enabled" th:value="${false}" />
                    <button type="submit" class="alert-off-button" id="alert-off-button">끄기</button>
                </form>
                <form th:action="@{/api/enable-notification}" method="post">
                    <input type="hidden" name="enabled" th:value="${true}" />
                    <button type="submit" class="alert-on-button" id="alert-on-button">켜기</button>
                </form>

            </a>
        </div>

        <hr class="divider">
    </section>
    <section class="department-section">
        학부 설정
        <div >
            <a class="department-status" >현재 <span th:text=" ${departmentName}"></span>만 가능</a>
            <a class="department-detail" ><span th:text="${departmentName}"></span></a>
        </div>
        <hr class="divider">
    </section>
    <section class="unregister-logout-section">
        <a id="unregister-button">회원탈퇴</a>
        <form th:action="@{/logout}" method="get">
            <button class="logout-button" id="logout-button" type="submit">로그아웃</button>
        </form>

    </section>

    <div id="modal" class="modal">
        <!-- 모달 내용 -->
        <div class="modal-content">
            <div>
                <a>회원탈퇴 안내</a>
                <p>정말 회원탈퇴를 진행하시겠습니까?</p>
            </div>

            <div class="modal-content-buttons">
                <div class="cancel-button" id="cancel-button">취소</div>
                <form th:action="@{/account/delete}" method="get">
                    <button class="continue-button" type="submit" id="continue-button">계속 진행</button>
                </form>

            </div>
        </div>
    </div>

</div>
<script type="module" src="/js/mypage.js"></script>
<script>
    window.csrfToken = document.body.getAttribute('data-csrf-token');
</script>
</body>
</html>